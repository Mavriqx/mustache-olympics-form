// Find this block in your index.html <script> tag
try {
    const response = await fetch(LAMBDA_ENDPOINT, { /* ... */ });
    
    // --- REPLACE THIS ---
    if (response.ok) { 
        showStatus('Success! Your entry has been received. Thank you!', 'success'); 
        form.reset(); 
        widget.value(null); 
        document.getElementById('email-display').style.display = 'none'; 
    } else { 
        const errorData = await response.json(); 
        showStatus(`Error: ${errorData.message || 'Could not submit your entry.'}`, 'error'); 
    }
    // --- WITH THIS ---
    if (response.ok) {
        showStatus('Success! Your entry has been received. Thank you!', 'success');
        form.reset();
        widget.value(null);
        document.getElementById('email-display').style.display = 'none';
    } else if (response.status === 409) { // Specifically handles the "duplicate" error
        const errorData = await response.json();
        showStatus(errorData.message, 'error'); // Shows the message from our Lambda
    } else { // Handles all other errors
        const errorData = await response.json();
        showStatus(`Error: ${errorData.message || 'Could not submit your entry.'}`, 'error');
    }
    // --- END of replacement ---

} catch (error) { /* ... */ }
