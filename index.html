<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 Mustache Olympics Submission</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 40px auto; padding: 0 20px; }
        .title-container { display: flex; justify-content: center; align-items: center; gap: 15px; margin-bottom: 20px; }
        .logo { max-width: 240px; height: auto; } /* Increased logo size */
        h1 { color: #111; margin: 0; }
        p { text-align: left; }
        .social-promo { background-color: #f4f4f4; border-left: 4px solid #7B1E25; padding: 10px 15px; margin: 20px 0; font-size: 0.95em; }
        form { display: flex; flex-direction: column; gap: 20px; text-align: left; }
        label { font-weight: bold; }
        .optional-label { font-weight: normal; font-style: italic; color: #666; font-size: 0.9em; margin-left: 5px; }
        input[type="text"], input[type="email"], input[type="tel"], select { padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 16px; width: 100%; box-sizing: border-box; }
        
        /* --- Button and Form Control Styling --- */
        button[type="submit"] { 
            padding: 12px 20px; 
            background-color: #7B1E25; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            font-size: 16px; 
            cursor: pointer; 
            transition: background-color 0.2s;
            align-self: flex-end;
        }
        button[type="submit"]:hover { background-color: #61181E; }
        button[type="submit"]:disabled { background-color: #ccc; cursor: not-allowed; }
        
        .consent-group { display: flex; align-items: flex-start; gap: 10px; margin-top: 10px; }
        .consent-group input { margin-top: 5px; }
        .consent-group label { 
            font-weight: normal; 
            font-size: 0.9em;
            color: #555;
        }
        
        /* Unified uploader layout */
        .upload-wrapper { margin-top: 20px; }
        .upload-container { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 5px 5px 5px 15px;
        }
        .upload-text { font-weight: bold; }
        .upload-note { font-size: 0.85em; color: #666; margin-top: 5px; }
        .uploadcare--widget__button--primary {
            background-color: #7B1E25 !important;
            color: white !important;
            border-radius: 5px !important;
            border: none !important;
        }
        .uploadcare--widget__button--primary:hover {
            background-color: #61181E !important;
        }

        /* Placeholder styling for dropdowns */
        select.placeholder {
            color: #6c757d;
            font-size: 0.95em;
        }


        #status { margin-top: 20px; padding: 15px; border-radius: 5px; text-align: center; display: none; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        fieldset { border: none; padding: 0; margin: 0; }
        .main-legend { font-size: 1.2em; font-weight: bold; color: #111; margin-bottom: 15px; padding: 0; width: 100%; border-bottom: 1px solid #ccc; padding-bottom: 10px; }
        .form-blurb { font-size: 0.9em; color: #555; margin-bottom: 20px; }
        
        /* --- Optional Section Container --- */
        .optional-container {
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        /* --- Accordion Section Styling --- */
        .accordion { border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 10px; background-color: #fff; }
        .accordion summary { font-size: 1.1em; font-weight: bold; color: #333; padding: 15px; cursor: pointer; list-style: none; position: relative; }
        .accordion summary::-webkit-details-marker { display: none; } /* Hide default marker */
        .accordion summary::after { content: '+'; position: absolute; right: 20px; font-size: 1.4em; line-height: 1; }
        .accordion[open] summary::after { content: '−'; }
        .accordion-content { padding: 0 15px 15px; display: flex; flex-direction: column; gap: 15px; }

        /* --- Responsive Styles for Mobile --- */
        @media (max-width: 600px) {
            .title-container {
                flex-direction: column; /* Stack logo and title vertically */
                gap: 10px;
                text-align: center;
            }
            .logo {
                max-width: 150px; /* Adjust mobile logo size */
            }
            h1 {
                font-size: 1.5em; /* Adjust title size for mobile */
            }
        }

    </style>
    <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js" charset="utf-8"></script>
</head>
<body>
    <div class="title-container">
        <img src="Black.png" alt="Mustache Olympics Logo" class="logo">
        <h1>Mustache Olympics Submission</h1>
    </div>
    
    <div class="social-promo">
        Complete the form below to submit your official entry, and let the games begin!
    </div>
    
    <form id="contest-form">
        <input type="hidden" id="email" name="email">
        <fieldset>
            <legend class="main-legend">Required Information</legend>
            <div><label for="firstName">First Name</label><input type="text" id="firstName" name="firstName" required></div>
            <div><label for="lastName">Last Name</label><input type="text" id="lastName" name="lastName" required></div>
            <div><label for="city">City</label><input type="text" id="city" name="city" required></div>
            <div><label for="state">U.S. State</label><select id="state" name="state" required><option value="">select option</option><option value="AL">Alabama</option><option value="AK">Alaska</option><option value="AZ">Arizona</option><option value="AR">Arkansas</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DE">Delaware</option><option value="FL">Florida</option><option value="GA">Georgia</option><option value="HI">Hawaii</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="IA">Iowa</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="ME">Maine</option><option value="MD">Maryland</option><option value="MA">Massachusetts</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MS">Mississippi</option><option value="MO">Missouri</option><option value="MT">Montana</option><option value="NE">Nebraska</option><option value="NV">Nevada</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NY">New York</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VT">Vermont</option><option value="VA">Virginia</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option></select></div>
            <div class="consent-group"><input type="checkbox" id="consents" name="consents" required><label for="consents">By checking this box, I certify that I’m at least 18 years old, consent to receive event updates (including prizes), and agree to the <a href="YOUR_TERMS_PAGE_URL_HERE" target="_blank" rel="noopener noreferrer">Terms, Conditions & Privacy</a> policy.</label></div>
            <div class="upload-wrapper">
                <div class="upload-container">
                    <span class="upload-text">Upload Your Video</span>
                    <input type="hidden" role="uploadcare-uploader" data-clearable="true" name="video_file" id="video-uploader" />
                </div>
                <p class="upload-note">Must be between 5 and 30 seconds long to qualify.</p>
            </div>
        </fieldset>
        
        <div class="optional-container">
            <fieldset>
                <legend class="main-legend" style="border-bottom: none; margin-bottom: 0;">Optional Information</legend>
                <p class="form-blurb">Please help us plan for the 2026 Mustache Olympics by taking an extra 30 seconds to share!</p>
                
                <details class="accordion">
                    <summary>About Your Talent</summary>
                    <div class="accordion-content">
                        <div><label for="talentDescription">How would you describe it?</label><select id="talentDescription" name="talentDescription"><option value="">select option</option><option value="Athletic">Athletic</option><option value="Funny">Funny</option><option value="Artistic">Artistic</option><option value="Outrageous">Outrageous</option></select></div>
                        <div><label for="talentOrigin">How did you pick it?</label><select id="talentOrigin" name="talentOrigin"><option value="">select option</option><option value="Family Tradition">Family Tradition</option><option value="Happy Accident">Happy Accident</option><option value="Years of Practice">Years of Practice</option><option value="On a Dare">On a Dare</option><option value="Natural Calling">Natural Calling</option><option value="Just Felt Right">Just Felt Right</option></select></div>
                    </div>
                </details>

                <details class="accordion">
                    <summary>About Your 'Stache</summary>
                    <div class="accordion-content">
                        <div><label for="stacheFrequency">How often do you rock one?</label><select id="stacheFrequency" name="stacheFrequency"><option value="">select option</option><option value="All the time">All the time</option><option value="Sometimes">Sometimes</option><option value="Special Occasions">Special Occasions</option><option value="Barely">Barely</option><option value="Just for this event">Just for this event</option></select></div>
                        <div><label for="fullness">How would you describe it?</label><select id="fullness" name="fullness"><option value="">select option</option><option value="Thick & Bushy">Thick & Bushy</option><option value="About Average">About Average</option><option value="Trimmed & Thin">Trimmed & Thin</option></select></div>
                        <div><label for="generalStyle">How would you describe its style?</label><select id="generalStyle" name="generalStyle"><option value="">select option</option><option value="Styled / Sculpted">Styled / Sculpted</option><option value="Mostly Natural">Mostly Natural</option><option value="Wild & Untamed">Wild & Untamed</option></select></div>
                    </div>
                </details>
                
                <details class="accordion">
                    <summary>About You</summary>
                    <div class="accordion-content">
                        <div><label for="source">How did you learn about the event?</label><select id="source" name="source"><option value="">select option</option><option value="Friend or Family">Friend or Family</option><option value="Social Media">Social Media</option><option value="Event Card">Event Card</option><option value="Other">Other</option></select></div>
                        <div><label for="socialPlatform">Favorite Social Platform</label><select id="socialPlatform" name="socialPlatform"><option value="">select option</option><option value="TikTok">TikTok</option><option value="Instagram">Instagram</option><option value="Facebook">Facebook</option><option value="YouTube">YouTube</option><option value="Other">Other</option></select></div>
                        <div><label for="socialHandle">Social Media Handle</label><input type="text" id="socialHandle" name="socialHandle" placeholder="@yourhandle"></div>
                        <div><label for="phone">Phone Number <span class="optional-label">(for event updates via text)</span></label><input type="tel" id="phone" name="phone"></div>
                    </div>
                </details>
            </fieldset>
        </div>
        <button type="submit" id="submit-button">Submit My Entry</button>
    </form>
    <div id="status"></div>
    <script>
        const UPLOADCARE_PUBLIC_KEY = '2ae8933e05380119b824';
        const LAMBDA_ENDPOINT = 'https://lf5ekhxuvwgwuhc34tsis6eldm0ltwzr.lambda-url.us-east-2.on.aws/';
        
        document.addEventListener('DOMContentLoaded', () => { 
            const params = new URLSearchParams(window.location.search); 
            const email = params.get('email'); 
            if (email) { 
                document.getElementById('email').value = email; 
            }

            // Style dropdowns on load
            document.querySelectorAll('select').forEach(select => {
                if (select.value === "") {
                    select.classList.add('placeholder');
                }
                select.addEventListener('change', function() {
                    if (this.value === "") {
                        this.classList.add('placeholder');
                    } else {
                        this.classList.remove('placeholder');
                    }
                });
            });
        });
        
        const widget = uploadcare.Widget('#video-uploader', { publicKey: UPLOADCARE_PUBLIC_KEY, });
        const form = document.getElementById('contest-form');
        const submitButton = document.getElementById('submit-button');
        const statusDiv = document.getElementById('status');
        
        form.addEventListener('submit', async function(event) {
            event.preventDefault();
            submitButton.disabled = true; 
            submitButton.innerText = 'Submitting...';
            
            const uploaderInput = document.getElementById('video-uploader');
            const cdnUrl = uploaderInput.value;
            let fileUUID = null;
            if (cdnUrl) { const urlParts = cdnUrl.split('/'); if (urlParts.length > 3) { fileUUID = urlParts[3]; } }
            if (!fileUUID) { showStatus('Please upload a video file.', 'error'); submitButton.disabled = false; submitButton.innerText = 'Submit My Entry'; return; }
            
            const email = document.getElementById('email').value;
            if (!email) { showStatus('Email address is missing. Please ensure you used the link from your registration email.', 'error'); submitButton.disabled = false; submitButton.innerText = 'Submit My Entry'; return; }
            
            const payload = { 
                firstName: document.getElementById('firstName').value, 
                lastName: document.getElementById('lastName').value, 
                email: email, 
                city: document.getElementById('city').value, 
                state: document.getElementById('state').value, 
                phone: document.getElementById('phone').value,
                socialPlatform: document.getElementById('socialPlatform').value, 
                socialHandle: document.getElementById('socialHandle').value,
                source: document.getElementById('source').value, 
                fullness: document.getElementById('fullness').value,
                generalStyle: document.getElementById('generalStyle').value,
                stacheFrequency: document.getElementById('stacheFrequency').value,
                talentDescription: document.getElementById('talentDescription').value,
                talentOrigin: document.getElementById('talentOrigin').value,
                fileUUID: fileUUID, 
                consentsAgreed: document.getElementById('consents').checked
            };
            
            try {
                const response = await fetch(LAMBDA_ENDPOINT, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload), });
                if (response.ok) { showStatus('Success! Your entry has been received. Thank you!', 'success'); form.reset(); widget.value(null); } else { const errorData = await response.json(); showStatus(`Error: ${errorData.message || 'Could not submit your entry.'}`, 'error'); }
            } catch (error) { console.error('Submission error:', error); showStatus('A network error occurred. Please try again.', 'error');
            } finally {
                submitButton.disabled = false; 
                submitButton.innerText = 'Submit My Entry';
            }
        });
        function showStatus(message, type) { statusDiv.className = type; statusDiv.innerText = message; statusDiv.style.display = 'block'; }
    </script>
</body>
</html>
